!function(e){"use strict";const t={modules:{}};e.Kakashi=t}(window),function(e,t){"use strict";const o=function(){let t=void 0;return{getOrCreateDB:()=>new Promise((o,n)=>{if(t)return void o(t);if(!e)return console.log("This browser doesn't support IndexedDB"),void n();const r=e.open("KakashiDB");r.onerror=function(e){console.log("idb.onerror"),console.dir(e),n()},r.onsuccess=(e=>{console.log("idb.onsuccess"),(t=e.target.result).onerror=function(e){console.log("Error",e.target.error.name)},o(t)}),r.onupgradeneeded=function(e){console.log("idb.onupgradeneeded");const t=e.target.result;!1===t.objectStoreNames.contains("stocks")&&(t.createObjectStore("stocks",{keyPath:"ticker"}),console.log("db.createObjectStore"))}}),toArray:function(e){return new Promise(function(t,o){const n=[];e.transaction(["stocks"],"readonly").objectStore("stocks").openCursor().onsuccess=function(e){var o=e.target.result;o?(console.log(`Cursor => key ${o.key} : value ${o.value}`),n.push(o.value),o.continue()):t(n)}})},addItemToDB:function(e,t){return new Promise(function(o,n){console.log("_addItemToDB => Enter");const r=e.transaction(["stocks"],"readwrite");r.oncomplete=function(e){console.log("_addItemToDB => transaction.oncomplete"),o()},r.onerror=function(e){console.log("_addItemToDB => Error",e.target.error.name),n()};const c=r.objectStore("stocks"),s=IDBKeyRange.only(t.ticker),a=c.openCursor(s);a.onsuccess=function(e){console.log("_addItemToDB => _cursor.onsuccess");let o=e.target.result?c.put(t):c.add(t);o.onsuccess=function(e){console.log("_addItemToDB => Woot! Did it")},o.onerror=function(e){console.log("_addItemToDB => Error",e.target.error.name),n()}},a.onerror=function(e){console.log("_addItemToDB => Error",e.target.error.name),n()}})},cleanTheHouse:function(e){return new Promise(function(t,o){console.log("_cleanTheHouse");const n=e.transaction(["stocks"],"readwrite");n.oncomplete=function(e){console.log("_cleanTheHouse => transaction.oncomplete"),t()},n.onerror=function(e){console.log("_cleanTheHouse => Error",e.target.error.name),o()};const r=n.objectStore("stocks"),c=r.openCursor();c.onsuccess=function(e){console.log("_cleanTheHouse => _cursor.onsuccess");var n=e.target.result;if(n){console.log("_cleanTheHouse => _cursor exists");let e=r.delete(n.key);e.onsuccess=function(e){console.log("_cleanTheHouse => Woot! Did it")},e.onerror=function(e){console.log("_cleanTheHouse => Error",e.target.error.name),o()},n.continue()}else console.log("_cleanTheHouse => _cursor undefined"),t()},c.onerror=function(e){console.log("_cleanTheHouse => Error",e.target.error.name),o()}})}}}();t.modules.IndexedDB=o}(window.indexedDB,window.Kakashi),function(e,t,o){"use strict";const n=function(){const o=[],n=function(){return t&&"granted"===t.permission};return{init:function(){!1===n()&&t&&t.requestPermission().then(t=>{"granted"===t&&e.addEventListener("unload",()=>{o.forEach(function(e){e.close()})})})},fire:function(r){n()?o.push(new t("Kakashi says:",{body:r})):e.alert(r)}}}();o.modules.Notification=n}(window,window.Notification,window.Kakashi),function(e){"use strict";const t={inject:()=>{(()=>{let e=document.createElement("link");e.href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css",e.rel="stylesheet",document.head.appendChild(e)})(),(()=>{let e=document.createElement("style");e.innerHTML=".fab-container{position:fixed;bottom:50px;right:50px;z-index:999;cursor:pointer}.fab-icon-holder{width:50px;height:50px;border-radius:100%;background:#f58634;box-shadow:0 6px 20px rgba(0,0,0,.2)}.fab-image-holder{background-image:url(https://imgur.com/nbL1mka.png);background-size:58px;background-repeat:no-repeat;background-position:top}.fab-icon-holder:hover{opacity:.8}.fab-icon-holder i{display:flex;align-items:center;justify-content:center;height:100%;font-size:25px;color:#fff}.fab{width:60px;height:60px;background-color:#3e4095}.fab-options{list-style-type:none;margin:0;position:absolute;bottom:70px;right:0;opacity:0;transition:all .3s ease;transform:scale(0);transform-origin:85% bottom}.fab-options:hover,.fab:hover+.fab-options{opacity:1;transform:scale(1)}.fab-options li{display:flex;justify-content:flex-end;padding:5px}.fab-label{padding:2px 5px;align-self:center;user-select:none;white-space:nowrap;border-radius:3px;font-size:16px;background:#666;color:#fff;box-shadow:0 6px 20px rgba(0,0,0,.2);margin-right:10px}#snackbar{visibility:hidden;opacity:0;min-width:250px;margin-left:-125px;background-color:#3e4095;color:#fff;text-align:center;border-radius:2px;padding:16px;position:fixed;z-index:99999;left:50%;bottom:25%;font-size:17px}#snackbar.show{visibility:visible;opacity:1;-webkit-animation:fadein .5s,fadeout .5s 2.5s;animation:fadein .5s,fadeout .5s 2.5s}@-webkit-keyframes fadein{from{bottom:0;opacity:0}to{bottom:25%;opacity:1}}@keyframes fadein{from{bottom:0;opacity:0}to{bottom:25%;opacity:1}}@-webkit-keyframes fadeout{from{bottom:25%;opacity:1}to{bottom:0;opacity:0}}@keyframes fadeout{from{bottom:25%;opacity:1}to{bottom:0;opacity:0}}",document.head.appendChild(e)})()}};window.Kakashi.modules.Style=t}(),function(e){"use strict";const t=function(){const e=document.querySelector.bind(document);return{fire:t=>{let o=e("#snackbar");o||((o=document.createElement("div")).id="snackbar",e("body").appendChild(o)),o.textContent=t,o.classList.add("show"),setTimeout(()=>{o.classList.remove("show")},2850)}}}();e.modules.Snackbar=t}(window.Kakashi),function(e){"use strict";const t=function(){const e=e=>{let t=document.createElement("div");if(t.classList.add("fab-icon-holder"),e){let o=document.createElement("i");o.classList.add("fas",e),t.appendChild(o)}else t.classList.add("fab","fab-image-holder");return t},t=t=>{let o=document.createElement("li");return o.appendChild((e=>{let t=document.createElement("span");return t.classList.add("fab-label"),t.textContent=e,t})(t.textLabel)),o.appendChild(e(t.iconClass)),o.onclick=t.click,o};return{build:o=>{let n=document.createElement("div");n.classList.add("fab-container");let r=document.createElement("ul");r.classList.add("fab-options"),o.forEach(e=>{r.appendChild(t(e))}),n.appendChild(e()),n.appendChild(r),document.body.appendChild(n)}}}();e.modules.FAB=t}(window.Kakashi),function(e){"use strict";const{IndexedDB:t,Notification:o}=e.modules;o.init();const n=function(){const e=`https://${["s","t","a","t","u","s","i","n","v","e","s","t",".","c","o","m",".","b","r","/","a","c","o","e","s","/"].join("")}`,n="kakashi.tickers",r=document.querySelector.bind(document),c=function(e){return`${e.ticker}\t${e.company.name}\t${e.company.doc}\t${e.company.sector}\t${e.company.subsector}\t${e.company.segment}`},s=function(){const e={ticker:"",company:{name:"",doc:"",sector:"",subsector:"",segment:""}};let t;if(e.ticker=r(".company-pages").children[0].firstElementChild.textContent,console.log(`=> build stock object for ${e.ticker}`),e.company.name=r(".company-description h4 span").textContent,e.company.doc=r(".company-description h4 small").textContent,document.querySelectorAll("span.sub-value").forEach(e=>{-1!=e.textContent.indexOf("Setor")&&(t=e.parentElement.parentElement.parentElement.parentElement)}),t){const o=t.querySelectorAll("strong");e.company.sector=o[0].textContent.toUpperCase(),e.company.subsector=o[1].textContent.toUpperCase(),e.company.segment=o[2].textContent.toUpperCase()}return e},a=function(t){const o=t.shift();console.log(`next ticker... ${o}`),window.localStorage.setItem(n,JSON.stringify(t)),console.log(`set ${n}, update!`),window.location.href=`${e}${o}`},i=function(){let e=window.localStorage.getItem(n);if(console.log(`get ${n}`),console.log(`1. kakashiTickers: ${e}`),!e){const t=r("#kakashiTickers").value;if(t&&(e=t.split(","),console.log(`2. kakashiTickers: ${e}. First time!`),e.length))return a(e)}e?("string"==typeof e&&(e=JSON.parse(e),console.log(`3. kakashiTickers: ${e}`)),function(e){return t.getOrCreateDB().then(o=>t.addItemToDB(o,e)).catch(e=>{console.log(`saveToDB => getOrCreateDB => catch: ${e}`),console.dir(arguments)})}(s()).then(()=>{console.log("stock saved in DB"),e.length?a(e):(window.localStorage.removeItem(n),console.log(`${n} removed!`),t.getOrCreateDB().then(e=>t.toArray(e)).then(e=>{e=e.map(c),navigator.clipboard.writeText(e.join("\n")).then(()=>{console.log("COPIED to navigator.clipboard"),o.fire(`Done! ${e.length} assets were copied to the navigator.clipboard`),t.getOrCreateDB().then(e=>t.cleanTheHouse(e)).then(()=>console.log("cleanTheHouse end!"))})}).catch(()=>{console.log("saveToDB => getOrCreateDB => catch"),console.dir(arguments)}))}).catch(()=>{console.log("saveToDB something wrong!")})):console.log("execWebScraping: nothing to do!")};return{match:function(t){return t.href.startsWith(e)},init:function(){const e=r(".company-pages"),t=e.querySelector('li[data-target="#company-section"]'),n=t.cloneNode(!0);n.removeAttribute("data-target"),n.querySelector("a").removeAttribute("title"),n.querySelector(".material-icons").textContent="content_copy",n.querySelector("span").textContent="COPY",e.appendChild(n),n.onclick=(()=>{const e=s();navigator.clipboard.writeText(c(e)).then(()=>{n.querySelector("span").textContent="COPIED!",setTimeout(()=>{n.querySelector("span").textContent="COPY"},2e3),o.fire("Copied!")})});const a=t.cloneNode(!0);a.removeAttribute("data-target"),a.querySelector("a").removeAttribute("title"),a.querySelector(".material-icons").textContent="content_copy",a.querySelector("span").textContent="COPY ALL",e.appendChild(a),a.onclick=(()=>{i()});const l=r(".tab-nav-resume"),d=document.querySelector(".container").cloneNode(),u=document.createElement("textarea");u.id="kakashiTickers",d.appendChild(u),l.parentNode.insertBefore(d,l.nextSibling),i()}}}();e.modules.StatusInvest=n}(window.Kakashi),function(e){"use strict";const{Style:t,Snackbar:o,FAB:n}=e.modules,r=function(){const e=/pit\.avenue\.us/,r=/reports\/statement-us/,c=document.querySelector.bind(document),s=function(){const e=c("table.ui.striped.very.basic.table").querySelectorAll("tbody tr"),t=Array.from(e).map(e=>{try{const t=e.querySelectorAll("td");if(1===t.length){return{date:t[0].textContent}}{const e=t[2].textContent,o=(e=>{if(/Impostos.+tax/.test(e))return"T";if(/Dividendos.+dividend/.test(e))return"D";throw new Error(`not supported: ${e}`)})(e);return{date:"",asset:e.match(/\.\s(\w+)\s/)[1],type:o,value:t[3].textContent.match(/\d+,\d+/)[0]}}}catch(e){return}}).filter(e=>!!e).map((e,t,o)=>(0===e.date.length&&(e.date=o[t-1].date),e)).filter(e=>!!e.asset).map(e=>[e.date,e.asset,e.type,e.value].join("\t")).reduce((e,t)=>e.concat(`${e.length?"\n":""}${t}`));navigator.clipboard.writeText(t).then(()=>{o.fire("Copiado!")})};return{match:function(t){return e.test(t.host)},init:function(){r.test(location.pathname)&&(t.inject(),n.build([{textLabel:"Copiar Proventos/Taxes",iconClass:"fa-copy",click:s}]))}}}();e.modules.Avenue=r}(window.Kakashi),function(e){"use strict";const{StatusInvest:t,Avenue:o}=e.modules;t.match(window.location)&&t.init(),o.match(window.location)&&o.init()}(window.Kakashi);