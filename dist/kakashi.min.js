!function(e){"use strict";const t={modules:{}};e.Kakashi=t}(window),function(e){"use strict";const t=function(){const e=e=>{let t=document.createElement("tr");return(e.td||[]).forEach(e=>{let o=document.createElement("td");o.textContent=e,t.appendChild(o)}),t};return{buildTable:e=>{let t=document.createElement("table");return t.id=e.id,t.classList.add("kakashi-table","small"),t.onclick=e.onclick,e.thead&&t.appendChild(e.thead),e.tbody&&t.appendChild(e.tbody),t},buildTableTHead:e=>{let t=document.createElement("thead"),o=document.createElement("tr");return(e.th||[]).forEach(e=>{let t=document.createElement("th");t.textContent=e,o.appendChild(t)}),t.appendChild(o),t},buildTableTBody:(t={})=>{let o=document.createElement("tbody");return t.td&&o.appendChild(e(t)),o},buildTableTBodyTR:e}}();e.modules.Content=t}(window.Kakashi),function(e,t){"use strict";const o=function(){let t=void 0;return{getOrCreateDB:()=>new Promise((o,n)=>{if(t)return void o(t);if(!e)return console.log("This browser doesn't support IndexedDB"),void n();const a=e.open("KakashiDB");a.onerror=function(e){console.log("idb.onerror"),console.dir(e),n()},a.onsuccess=(e=>{console.log("idb.onsuccess"),(t=e.target.result).onerror=function(e){console.log("Error",e.target.error.name)},o(t)}),a.onupgradeneeded=function(e){console.log("idb.onupgradeneeded");const t=e.target.result;!1===t.objectStoreNames.contains("stocks")&&(t.createObjectStore("stocks",{keyPath:"ticker"}),console.log("db.createObjectStore"))}}),toArray:function(e){return new Promise(function(t,o){const n=[];e.transaction(["stocks"],"readonly").objectStore("stocks").openCursor().onsuccess=function(e){var o=e.target.result;o?(console.log(`Cursor => key ${o.key} : value ${o.value}`),n.push(o.value),o.continue()):t(n)}})},addItemToDB:function(e,t){return new Promise(function(o,n){console.log("_addItemToDB => Enter");const a=e.transaction(["stocks"],"readwrite");a.oncomplete=function(e){console.log("_addItemToDB => transaction.oncomplete"),o()},a.onerror=function(e){console.log("_addItemToDB => Error",e.target.error.name),n()};const r=a.objectStore("stocks"),i=IDBKeyRange.only(t.ticker),s=r.openCursor(i);s.onsuccess=function(e){console.log("_addItemToDB => _cursor.onsuccess");let o=e.target.result?r.put(t):r.add(t);o.onsuccess=function(e){console.log("_addItemToDB => Woot! Did it")},o.onerror=function(e){console.log("_addItemToDB => Error",e.target.error.name),n()}},s.onerror=function(e){console.log("_addItemToDB => Error",e.target.error.name),n()}})},cleanTheHouse:function(e){return new Promise(function(t,o){console.log("_cleanTheHouse");const n=e.transaction(["stocks"],"readwrite");n.oncomplete=function(e){console.log("_cleanTheHouse => transaction.oncomplete"),t()},n.onerror=function(e){console.log("_cleanTheHouse => Error",e.target.error.name),o()};const a=n.objectStore("stocks"),r=a.openCursor();r.onsuccess=function(e){console.log("_cleanTheHouse => _cursor.onsuccess");var n=e.target.result;if(n){console.log("_cleanTheHouse => _cursor exists");let e=a.delete(n.key);e.onsuccess=function(e){console.log("_cleanTheHouse => Woot! Did it")},e.onerror=function(e){console.log("_cleanTheHouse => Error",e.target.error.name),o()},n.continue()}else console.log("_cleanTheHouse => _cursor undefined"),t()},r.onerror=function(e){console.log("_cleanTheHouse => Error",e.target.error.name),o()}})}}}();t.modules.IndexedDB=o}(window.indexedDB,window.Kakashi),function(e){"use strict";const t={inject:()=>{(()=>{let e=document.createElement("link");e.rel="stylesheet",e.href="https://maxst.icons8.com/vue-static/landings/line-awesome/line-awesome/1.3.0/css/line-awesome.min.css",document.head.appendChild(e)})(),(()=>{let e=document.createElement("style");e.innerHTML='.small{font-size:80%;font-weight:400}.kakashi-table{width:100%;margin-top:1rem;background-color:transparent}.kakashi-table td,.kakashi-table th{padding:.3rem}.fab-container{position:fixed;bottom:50px;right:50px;z-index:999;cursor:pointer}.fab-icon-holder{width:50px;height:50px;border-radius:100%;background:#f58634;box-shadow:0 6px 20px rgba(0,0,0,.2)}.fab-image-holder{background-image:url(https://imgur.com/nbL1mka.png);background-size:58px;background-repeat:no-repeat;background-position:top}.fab-icon-holder:hover{opacity:.8}.fab-icon-holder i{display:flex;align-items:center;justify-content:center;height:100%;font-size:25px;color:#fff}.fab-main{width:60px;height:60px;background-color:#3e4095}.fab-main::before{content:"";position:absolute;width:100%;height:100%;bottom:10px}.fab-options{list-style-type:none;margin:0;position:absolute;bottom:70px;right:0;opacity:0;transition:all .3s ease;transform:scale(0);transform-origin:85% bottom}.fab-main:hover+.fab-options,.fab-options:hover{opacity:1;transform:scale(1)}.fab-options li{display:flex;justify-content:flex-end;padding:5px}.fab-label{padding:2px 5px;align-self:center;user-select:none;white-space:nowrap;border-radius:3px;font-size:16px;background:#666;color:#fff;box-shadow:0 6px 20px rgba(0,0,0,.2);margin-right:10px}.micromodal{font-family:-apple-system,BlinkMacSystemFont,avenir next,avenir,helvetica neue,helvetica,ubuntu,roboto,noto,segoe ui,arial,sans-serif}.modal__overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.6);display:flex;justify-content:center;align-items:center;z-index:999999}.modal__container{background-color:#fff;padding:30px;max-width:500px;max-height:100vh;border-radius:4px;overflow-y:auto;box-sizing:border-box;min-width:30%}.modal__header{display:flex;justify-content:space-between;align-items:center}.modal__title{margin-top:0;margin-bottom:0;font-weight:600;font-size:1.25rem;line-height:1.25;color:#3e4095;box-sizing:border-box}.modal__close{background-color:transparent!important;border:0}.modal__close:before{content:"\\2715"}.modal__close:focus,.modal__close:hover{color:#000;text-decoration:none;opacity:.75}.modal__content{margin-top:2rem;margin-bottom:2rem;line-height:1.5;color:rgba(0,0,0,.8)}.modal__footer{text-align:right}.modal__btn{font-size:.875rem;padding-left:1rem;padding-right:1rem;padding-top:.5rem;padding-bottom:.5rem;background-color:#e6e6e6!important;color:rgba(0,0,0,.8);border-radius:.25rem;border-style:none;border-width:0;cursor:pointer;-webkit-appearance:button;text-transform:none;overflow:visible;line-height:1.15;margin:0;will-change:transform;-moz-osx-font-smoothing:grayscale;-webkit-backface-visibility:hidden;backface-visibility:hidden;-webkit-transform:translateZ(0);transform:translateZ(0);transition:-webkit-transform .25s ease-out;transition:transform .25s ease-out;transition:transform .25s ease-out,-webkit-transform .25s ease-out}.modal__btn:focus,.modal__btn:hover{-webkit-transform:scale(1.05);transform:scale(1.05)}.modal__btn-primary{background-color:#3e4095!important;color:#fff}@keyframes mmfadeIn{from{opacity:0}to{opacity:1}}@keyframes mmfadeOut{from{opacity:1}to{opacity:0}}@keyframes mmslideIn{from{transform:translateY(15%)}to{transform:translateY(0)}}@keyframes mmslideOut{from{transform:translateY(0)}to{transform:translateY(-10%)}}.micromodal-slide{display:none}.micromodal-slide.is-open{display:block}.micromodal-slide[aria-hidden=false] .modal__overlay{animation:mmfadeIn .3s cubic-bezier(0,0,.2,1)}.micromodal-slide[aria-hidden=false] .modal__container{animation:mmslideIn .3s cubic-bezier(0,0,.2,1)}.micromodal-slide[aria-hidden=true] .modal__overlay{animation:mmfadeOut .3s cubic-bezier(0,0,.2,1)}.micromodal-slide[aria-hidden=true] .modal__container{animation:mmslideOut .3s cubic-bezier(0,0,.2,1)}.micromodal-slide .modal__container,.micromodal-slide .modal__overlay{will-change:transform}.modal__container .form-control{display:block;width:100%;padding:.375rem .75rem;font-size:1rem;line-height:1.5;color:#495057;background-color:#fff;background-clip:padding-box;border:1px solid #ced4da;border-radius:.25rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.modal__container .form-control:focus{color:#495057;background-color:#fff;border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem rgb(0 123 255 / 25%)}.modal__container textarea{height:initial;overflow:auto;resize:vertical}#snackbar{visibility:hidden;opacity:0;min-width:250px;margin-left:-125px;background-color:#3e4095;color:#fff;text-align:center;border-radius:2px;padding:16px;position:fixed;z-index:9999999;left:50%;bottom:20%;font-size:17px}#snackbar.show{visibility:visible;opacity:1;-webkit-animation:fadein .5s,fadeout .5s 2.5s;animation:fadein .5s,fadeout .5s 2.5s}@-webkit-keyframes fadein{from{bottom:0;opacity:0}to{bottom:20%;opacity:1}}@keyframes fadein{from{bottom:0;opacity:0}to{bottom:20%;opacity:1}}@-webkit-keyframes fadeout{from{bottom:20%;opacity:1}to{bottom:0;opacity:0}}@keyframes fadeout{from{bottom:20%;opacity:1}to{bottom:0;opacity:0}}',document.head.appendChild(e)})()}};window.Kakashi.modules.Style=t}(),function(e){"use strict";const t=function(){const e=document.querySelector.bind(document);return{fire:t=>{let o=e("#snackbar");o||((o=document.createElement("div")).id="snackbar",e("body").appendChild(o)),o.textContent=t,o.classList.add("show"),setTimeout(()=>{o.classList.remove("show")},2850)}}}();e.modules.Snackbar=t}(window.Kakashi),function(e){"use strict";const t=function(){const e=e=>{let t=document.createElement("div");if(t.classList.add("fab-icon-holder"),e){let o=document.createElement("i");o.classList.add(...e.split(" ")),t.appendChild(o)}else t.classList.add("fab-main","fab-image-holder");return t},t=t=>{let o=document.createElement("li");return o.appendChild((e=>{let t=document.createElement("span");return t.classList.add("fab-label"),t.textContent=e,t})(t.textLabel)),o.appendChild(e(t.iconClass)),o.onclick=t.click,o};return{build:o=>{let n=document.createElement("div");n.classList.add("fab-container");let a=document.createElement("ul");a.classList.add("fab-options"),o.forEach(e=>{a.appendChild(t(e))}),n.appendChild(e()),n.appendChild(a),document.body.appendChild(n)}}}();e.modules.FAB=t}(window.Kakashi),function(e){"use strict";const t=function(){const e=()=>{let e=document.createElement("div");e.innerHTML='<div class="micromodal micromodal-slide" id="kakashi-modal" aria-hidden="true"><div class="modal__overlay" tabindex="-1" data-micromodal-close><div class="modal__container" role="dialog" aria-modal="true" aria-labelledby="kakashi-modal-title"><header class="modal__header"><h2 class="modal__title" id="kakashi-modal-title"></h2><button class="modal__close" aria-label="Close modal" data-micromodal-close></button></header><main class="modal__content" id="kakashi-modal-content"></main><footer class="modal__footer"><button class="modal__btn modal__btn-primary">Continue</button> <button class="modal__btn" data-micromodal-close aria-label="Close this dialog window">Close</button></footer></div></div></div>',document.body.appendChild(e.firstChild)},t=()=>{let e=document.createElement("script");e.src="https://cdn.jsdelivr.net/npm/micromodal/dist/micromodal.min.js",document.body.appendChild(e)};return{init:()=>{!function(...e){e.map(e=>setTimeout(e,25))}(e,t)},open:e=>{let t=document.querySelector("#kakashi-modal");t.querySelector(".modal__title").textContent=e.title,t.querySelector(".modal__content").innerHTML="",t.querySelector(".modal__content").appendChild(e.content),t.querySelector(".modal__btn-primary").onclick=e.mainAction,window.MicroModal.show("#kakashi-modal".substring(1))}}}();e.modules.Modal=t}(window.Kakashi),function(e){"use strict";const{Content:t,IndexedDB:o,Style:n,Snackbar:a,FAB:r,Modal:i}=e.modules;i.init();const s=function(){const e=/statusinvest\.com\.br/;let o=[];const s=document.querySelector.bind(document),c=e=>{let t={ticker:"",company:{name:"",doc:"",sector:"",subsector:"",segment:""}};return t.ticker=e.querySelector(".company-pages").children[0].firstElementChild.textContent,t.company.name=e.querySelector(".company-description h4 span").textContent,t.company.doc=e.querySelector(".company-description h4 small").textContent,t},l=(e=[])=>{if(0===e.length)return;const n=window.location,a=n.protocol,r=n.host;let i=e.shift();console.log(i),fetch(`${a}//${r}/acoes/${i}`,{method:"GET",headers:{"Content-Type":"application/json;charset=utf-8"}}).then(e=>e.text()).then(e=>(new DOMParser).parseFromString(e,"text/html")).then(e=>c(e)).then(e=>(e=>{o.push(e),s("#kakashi-result-table tbody").appendChild(t.buildTableTBodyTR({td:[e.ticker,e.company.name,e.company.doc]}))})(e)).then(()=>l(e))},d=()=>{let e=o.map(e=>[e.ticker,e.company.name,e.company.doc].join("\t")).reduce((e,t)=>e.concat(`${e.length?"\n":""}${t}`));navigator.clipboard.writeText(e).then(()=>{a.fire("Copiado!")})},m=()=>{o=[];let e=s("#kakashi-tickers").value;if(e){let o=s("#kakashi-modal-content"),n=s("#kakashi-result-table");n&&n.parentElement.removeChild(n),n=t.buildTable({id:"#kakashi-result-table".substring(1),onclick:d,thead:t.buildTableTHead({th:["Ticker","Company Name","Company Doc"]}),tbody:t.buildTableTBody()}),o.appendChild(n),l(e.split(","))}},u=()=>{let e=document.createElement("div"),t=document.createElement("textarea");return t.classList.add("form-control"),t.id="#kakashi-tickers".substring(1),t.rows=5,e.appendChild(t),e},p=()=>{const e=c();navigator.clipboard.writeText(_toLineSheet(e)).then(()=>{a.fire("Copiado!")})};return{match:function(t){return e.test(t.host)},init:function(){n.inject(),r.build([{textLabel:"Copiar Informações",iconClass:"lar la-copy",click:p},{textLabel:"Copiar Informações (lote)",iconClass:"lar la-clipboard",click:()=>{i.open({title:"Lista de Ativos",content:u(),mainAction:m})}}])}}}();e.modules.StatusInvest=s}(window.Kakashi),function(e){"use strict";const{Style:t,Snackbar:o,FAB:n}=e.modules,a=function(){const e=/pit\.avenue\.us/,a=/reports\/statement-us/,r=document.querySelector.bind(document),i=function(){const e=r("table.ui.striped.very.basic.table").querySelectorAll("tbody tr"),t=Array.from(e).map(e=>{try{const t=e.querySelectorAll("td");if(1===t.length){return{date:t[0].textContent}}{const e=t[2].textContent,o=(e=>{if(/Impostos.+tax/.test(e))return"T";if(/Dividendos.+dividend/.test(e))return"D";throw new Error(`not supported: ${e}`)})(e);return{date:"",asset:e.match(/\.\s(\w+)\s/)[1],type:o,value:t[3].textContent.match(/\d+,\d+/)[0]}}}catch(e){return}}).filter(e=>!!e).map((e,t,o)=>(0===e.date.length&&(e.date=o[t-1].date),e)).filter(e=>!!e.asset).map(e=>[e.date,e.asset,e.type,e.value].join("\t")).reduce((e,t)=>e.concat(`${e.length?"\n":""}${t}`));navigator.clipboard.writeText(t).then(()=>{o.fire("Copiado!")})};return{match:function(t){return e.test(t.host)},init:function(){a.test(location.pathname)&&(t.inject(),n.build([{textLabel:"Copiar Proventos/Taxes",iconClass:"lar la-copy",click:i}]))}}}();e.modules.Avenue=a}(window.Kakashi),function(e){"use strict";const{Style:t,Snackbar:o,FAB:n}=e.modules,a=function(){const e=/pro\.clear\.com\.br/,a=/#minha-conta\/extrato/,r=/DIVIDENDOS|JUROS.+CAPITAL|RENDIMENTO/,i=()=>{let e=Array.from(document.querySelectorAll(".exchange-items .item")).filter(e=>r.test(e.querySelector(".cont-description").textContent)).map(e=>({date:e.querySelector(".cont-date.operation").textContent.trim(),desc:e.querySelector(".cont-description").textContent.trim(),value:e.querySelector(".cont-value").textContent.trim()})).map(e=>({date:e.date.trim(),desc:e.desc.replace("* PROV *","").trim(),value:e.value.trim()})).map(e=>[e.date,e.desc.match(/[A-Z]{4}\d{1,2}$/)[0],e.desc.substring(0,1),e.value].join("\t")).join("\n");navigator.clipboard.writeText(e).then(()=>{o.fire("Copiado!")})};return{match:function(t){return e.test(t.host)},init:function(){a.test(location.hash)&&Array.from(document.body.classList).find(e=>"extrato"==e)&&(t.inject(),n.build([{textLabel:"Copiar Proventos",iconClass:"lar la-copy",click:i}]))}}}();e.modules.Clear=a}(Kakashi),function(e){"use strict";const{StatusInvest:t,Avenue:o,Clear:n}=e.modules;[t,o,n].map(e=>e.match(window.location)&&e.init())}(window.Kakashi);